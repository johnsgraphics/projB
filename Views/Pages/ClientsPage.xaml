<!--  filename: F:\CabinetDoc Pro\Views\Pages\ClientsPage.xaml  -->
<Page
    x:Class="CabinetDocProWpf.Views.Pages.ClientsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    d:DesignHeight="800"
    d:DesignWidth="1200"
    Background="#F3F5FA"
    mc:Ignorable="d">

    <ScrollViewer PanningMode="VerticalOnly" VerticalScrollBarVisibility="Auto">
        <Grid Margin="40,30">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <!--  Header Section  -->
            <Grid Grid.Row="0" Margin="0,0,0,30">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0">
                    <TextBlock
                        FontSize="28"
                        FontWeight="Bold"
                        Foreground="#1F2937"
                        Text="Gestion des Clients" />
                    <TextBlock
                        Margin="0,8,0,0"
                        FontSize="14"
                        Foreground="#6B7280"
                        Text="Gérez vos clients et suivez leurs informations comptables" />
                </StackPanel>

                <!--  Action Button  -->
                <Button
                    Grid.Column="1"
                    Padding="16,10"
                    Click="BtnAddClient_Click"
                    Content="➕ Ajouter un Client"
                    FontSize="13"
                    Style="{StaticResource PrimaryButtonStyle}" />
            </Grid>

            <!--  Stats Cards  -->
            <Grid Grid.Row="1" Margin="0,0,0,30">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="20" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="20" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!--  Total Clients Card  -->
                <Border
                    Grid.Column="0"
                    Padding="24"
                    Background="White"
                    CornerRadius="12">
                    <Border.Effect>
                        <DropShadowEffect
                            BlurRadius="10"
                            Opacity="0.08"
                            ShadowDepth="0"
                            Color="#000000" />
                    </Border.Effect>
                    <StackPanel>
                        <TextBlock
                            Margin="0,0,0,12"
                            FontSize="11"
                            FontWeight="SemiBold"
                            Foreground="#9CA3AF"
                            Text="TOTAL CLIENTS" />
                        <StackPanel Margin="0,0,0,10" Orientation="Horizontal">
                            <TextBlock
                                FontSize="32"
                                FontWeight="Bold"
                                Foreground="#1F2937"
                                Text="0" />
                            <TextBlock
                                Margin="12,0,0,0"
                                VerticalAlignment="Center"
                                FontSize="28"
                                Text="👥" />
                        </StackPanel>
                        <TextBlock
                            FontSize="12"
                            Foreground="#6B7280"
                            Text="Clients enregistrés" />
                    </StackPanel>
                </Border>

                <!--  Active Clients Card  -->
                <Border
                    Grid.Column="2"
                    Padding="24"
                    Background="White"
                    CornerRadius="12">
                    <Border.Effect>
                        <DropShadowEffect
                            BlurRadius="10"
                            Opacity="0.08"
                            ShadowDepth="0"
                            Color="#000000" />
                    </Border.Effect>
                    <StackPanel>
                        <TextBlock
                            Margin="0,0,0,12"
                            FontSize="11"
                            FontWeight="SemiBold"
                            Foreground="#9CA3AF"
                            Text="CLIENTS ACTIFS" />
                        <StackPanel Margin="0,0,0,10" Orientation="Horizontal">
                            <TextBlock
                                FontSize="32"
                                FontWeight="Bold"
                                Foreground="#1F2937"
                                Text="0" />
                            <TextBlock
                                Margin="12,0,0,0"
                                VerticalAlignment="Center"
                                FontSize="28"
                                Text="✅" />
                        </StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock
                                Margin="0,0,5,0"
                                FontSize="12"
                                Foreground="#10B981"
                                Text="100%" />
                            <TextBlock
                                FontSize="12"
                                Foreground="#6B7280"
                                Text="activité" />
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!--  New This Month Card  -->
                <Border
                    Grid.Column="4"
                    Padding="24"
                    Background="White"
                    CornerRadius="12">
                    <Border.Effect>
                        <DropShadowEffect
                            BlurRadius="10"
                            Opacity="0.08"
                            ShadowDepth="0"
                            Color="#000000" />
                    </Border.Effect>
                    <StackPanel>
                        <TextBlock
                            Margin="0,0,0,12"
                            FontSize="11"
                            FontWeight="SemiBold"
                            Foreground="#9CA3AF"
                            Text="NOUVEAUX CE MOIS" />
                        <StackPanel Margin="0,0,0,10" Orientation="Horizontal">
                            <TextBlock
                                FontSize="32"
                                FontWeight="Bold"
                                Foreground="#1F2937"
                                Text="0" />
                            <TextBlock
                                Margin="12,0,0,0"
                                VerticalAlignment="Center"
                                FontSize="28"
                                Text="🆕" />
                        </StackPanel>
                        <TextBlock
                            FontSize="12"
                            Foreground="#6B7280"
                            Text="Ajoutés récemment" />
                    </StackPanel>
                </Border>
            </Grid>

            <!--  Search + Filters  -->
            <Grid Grid.Row="2" Margin="0,0,0,25">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="2*" />
                    <ColumnDefinition Width="15" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="15" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!--  Search Box  -->
                <Border
                    Grid.Column="0"
                    Background="White"
                    BorderBrush="#E5E7EB"
                    BorderThickness="1"
                    CornerRadius="8">
                    <TextBox
                        x:Name="TxtSearch"
                        Height="42"
                        Padding="14,0"
                        VerticalContentAlignment="Center"
                        Background="Transparent"
                        BorderThickness="0"
                        FontSize="14"
                        Foreground="#6B7280"
                        Text="🔍 Rechercher par nom, email ou téléphone..." />
                </Border>

                <!--  Status Filter  -->
                <Border
                    Grid.Column="2"
                    Background="White"
                    BorderBrush="#E5E7EB"
                    BorderThickness="1"
                    CornerRadius="8">
                    <ComboBox
                        Height="42"
                        Padding="14,0"
                        VerticalContentAlignment="Center"
                        Background="Transparent"
                        BorderThickness="0"
                        FontSize="14">
                        <ComboBoxItem Content="Tous les statuts" IsSelected="True" />
                        <ComboBoxItem Content="Actif" />
                        <ComboBoxItem Content="Inactif" />
                    </ComboBox>
                </Border>

                <!--  Sort Filter  -->
                <Border
                    Grid.Column="4"
                    Background="White"
                    BorderBrush="#E5E7EB"
                    BorderThickness="1"
                    CornerRadius="8">
                    <ComboBox
                        Height="42"
                        Padding="14,0"
                        VerticalContentAlignment="Center"
                        Background="Transparent"
                        BorderThickness="0"
                        FontSize="14">
                        <ComboBoxItem Content="Trier par nom" IsSelected="True" />
                        <ComboBoxItem Content="Date d'ajout" />
                        <ComboBoxItem Content="Activité récente" />
                    </ComboBox>
                </Border>
            </Grid>

            <!--  Clients List (Hidden initially)  -->
            <Border
                x:Name="ClientsList"
                Grid.Row="3"
                Padding="0"
                Background="Transparent"
                Visibility="Collapsed">
                <ListView
                    Background="Transparent"
                    BorderThickness="0"
                    ItemsSource="{Binding}">
                    <ListView.ItemTemplate>
                        <DataTemplate>
                            <Border
                                Margin="0,0,0,15"
                                Padding="24"
                                Background="White"
                                CornerRadius="12">
                                <Border.Effect>
                                    <DropShadowEffect
                                        BlurRadius="10"
                                        Opacity="0.08"
                                        ShadowDepth="0"
                                        Color="#000000" />
                                </Border.Effect>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Grid.Column="0">
                                        <TextBlock
                                            FontSize="16"
                                            FontWeight="SemiBold"
                                            Foreground="#1F2937"
                                            Text="{Binding Name}" />
                                        <TextBlock
                                            Margin="0,6,0,0"
                                            FontSize="13"
                                            Foreground="#6B7280"
                                            Text="{Binding Address}" />
                                        <StackPanel Margin="0,8,0,0" Orientation="Horizontal">
                                            <TextBlock
                                                Margin="0,0,15,0"
                                                FontSize="12"
                                                Foreground="#9CA3AF">
                                                <Run Text="NIF: " />
                                                <Run Foreground="#1F2937" Text="{Binding Nif}" />
                                            </TextBlock>
                                            <TextBlock FontSize="12" Foreground="#9CA3AF">
                                                <Run Text="RC: " />
                                                <Run Foreground="#1F2937" Text="{Binding Rc}" />
                                            </TextBlock>
                                        </StackPanel>
                                    </StackPanel>

                                    <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                        <Button
                                            Padding="12,8"
                                            Content="📝 Modifier"
                                            FontSize="12"
                                            Style="{StaticResource SecondaryButtonStyle}" />
                                    </StackPanel>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>
            </Border>

            <!--  Empty State  -->
            <Border
                x:Name="EmptyState"
                Grid.Row="3"
                Padding="60"
                Background="White"
                CornerRadius="12"
                Visibility="Visible">
                <Border.Effect>
                    <DropShadowEffect
                        BlurRadius="10"
                        Opacity="0.08"
                        ShadowDepth="0"
                        Color="#000000" />
                </Border.Effect>
                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                    <Border
                        Width="120"
                        Height="120"
                        Margin="0,0,0,25"
                        Background="#F3F4F6"
                        CornerRadius="60">
                        <TextBlock
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            FontSize="60"
                            Text="👥" />
                    </Border>

                    <TextBlock
                        Margin="0,0,0,10"
                        HorizontalAlignment="Center"
                        FontSize="22"
                        FontWeight="SemiBold"
                        Foreground="#1F2937"
                        Text="Aucun client trouvé" />
                    <TextBlock
                        MaxWidth="450"
                        Margin="0,0,0,30"
                        HorizontalAlignment="Center"
                        FontSize="14"
                        Foreground="#6B7280"
                        Text="Commencez par ajouter votre premier client pour gérer vos relations comptables."
                        TextAlignment="Center"
                        TextWrapping="Wrap" />

                    <Button
                        Padding="20,12"
                        Click="BtnAddClient_Click"
                        Content="➕ Ajouter votre premier client"
                        FontSize="14"
                        Style="{StaticResource PrimaryButtonStyle}" />
                </StackPanel>
            </Border>

        </Grid>
    </ScrollViewer>
</Page>
